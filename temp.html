<!DOCTYPE html>
<html>

<head>
	<script src="https://code.jquery.com/jquery-1.7.2.min.js" type="text/javascript" charset="utf-8"></script>
	<script src="raphael-2.1.4.min.js"></script>
	<script src="justgage.js"></script>

	<style>
		/* Establece el tamaño de las gráficas aquí */
		.gauge {
			width: 300px;
			height: 300px;
			margin: 0 auto; /* Centra horizontalmente */
		}
	</style>

	<script>
		var accessToken = "0b9829b008038ea9359cf44359a0968d43899bf5";
		var deviceID = "2f002e001847393035313137";
		var url = "https://api.particle.io/v1/devices/" + deviceID + "/gradosC";
		var url1 = "https://api.particle.io/v1/devices/" + deviceID + "/gradosF";
		var url2 = "https://api.particle.io/v1/devices/" + deviceID + "/humedad";
		function callback(data, status) {
			if (status == "success") {
				temp = parseFloat(data.result);
				temp = temp.toFixed(2);
				g1.refresh(temp);
				setTimeout(getReading, 1000);
			} else {
				alert("Hubo un problema");
			}
		}
		function callback1(data, status) {
			if (status == "success") {
				temp = parseFloat(data.result);
				temp = temp.toFixed(2);
				g2.refresh(temp); // Actualiza la segunda gráfica
				setTimeout(getReading, 1000);
			} else {
				alert("Hubo un problema");
			}
		}
		function callback2(data, status) {
			if (status == "success") {
				temp = parseFloat(data.result);
				temp = temp.toFixed(2);
				g3.refresh(temp); // Actualiza la tercera gráfica
				setTimeout(getReading, 1000);
			} else {
				alert("Hubo un problema");
			}
		}
		function getReading() {
			$.get(url, { access_token: accessToken }, callback);
		}
		function getReading1() {
			$.get(url1, { access_token: accessToken }, callback1);
		}
		function getReading2() {
			$.get(url2, { access_token: accessToken }, callback2);
		}				
	</script>
</head>

<body>
	<div id="gauge1" class="gauge"></div>
	<div id="gauge2" class="gauge"></div>
	<div id="gauge3" class="gauge"></div>

	<script>
		var g1 = new JustGage({
			id: "gauge1",
			value: 0,
			min: 0,
			max: 50,
			title: "Temperatura (C)"
		});
		getReading();
	</script>
	<script>
		var g2 = new JustGage({
			id: "gauge2",
			value: 0,
			min: 0,
			max: 100,
			title: "Temperatura (F)"
		});
		getReading1();
	</script>	
	<script>
		var g3 = new JustGage({
			id: "gauge3",
			value: 0,
			min: 0,
			max: 100,
			title: "Humedad (%)"
		});
		getReading2();
	</script>
</body>

</html>
